<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HVAC Diagram Generator</title>
  <meta name="description"
    content="Generate professional HVAC installation diagrams â€” refrigerant piping, electrical wiring, and wiring output layouts." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
          colors: {
            brand: { 500: '#4f46e5', 600: '#4338ca', 700: '#3730a3' },
          },
        }
      }
    }
  </script>
  <style>
    input[type=range] {
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      border-radius: 2px;
      outline: none;
    }

    .dark input[type=range] {
      background: #334155;
    }

    input[type=range] {
      background: #cbd5e1;
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #4f46e5;
      cursor: pointer;
    }

    .toast-enter {
      animation: slideIn .25s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .custom-scroll::-webkit-scrollbar {
      width: 4px;
    }

    .custom-scroll::-webkit-scrollbar-track {
      background: transparent;
    }

    .custom-scroll::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 4px;
    }
  </style>
</head>

<body
  class="dark:bg-gray-950 bg-gray-50 font-sans text-gray-900 dark:text-gray-100 h-screen overflow-hidden transition-colors duration-200">
  <div id="app" class="flex h-full">

    <!-- SIDEBAR -->
    <aside id="sidebar"
      class="w-[340px] min-w-[340px] flex flex-col dark:bg-gray-900 bg-white border-r dark:border-gray-800 border-gray-200 transition-colors duration-200">

      <!-- Header -->
      <div class="flex items-center gap-3 px-4 py-3 border-b dark:border-gray-800 border-gray-200">
        <div class="w-8 h-8 rounded-md bg-brand-500 flex items-center justify-center">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
            <path d="M5 10h10M10 5v10" stroke="#fff" stroke-width="2" stroke-linecap="round" />
            <circle cx="10" cy="10" r="3.5" stroke="#fff" stroke-width="1.5" />
          </svg>
        </div>
        <h1 class="text-sm font-semibold">HVAC Diagram Generator</h1>
        <div class="ml-auto flex items-center gap-1">
          <button id="btnThemeToggle" title="Toggle theme"
            class="p-1.5 rounded dark:hover:bg-gray-800 hover:bg-gray-100 transition-colors text-sm">ğŸŒ™</button>
          <button id="btnFullscreen" title="Fullscreen"
            class="p-1.5 rounded dark:hover:bg-gray-800 hover:bg-gray-100 transition-colors text-sm">â›¶</button>
        </div>
      </div>

      <!-- Content -->
      <div class="flex-1 overflow-y-auto custom-scroll px-4 py-3 space-y-4">

        <!-- Presets -->
        <section>
          <label
            class="block text-[10px] font-semibold uppercase tracking-wider dark:text-gray-500 text-gray-400 mb-1.5">Quick
            Presets</label>
          <div class="grid grid-cols-2 gap-1.5" id="presetButtons">
            <button
              class="px-2.5 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors text-left"
              data-preset="small-office">ğŸ¢ Small Office</button>
            <button
              class="px-2.5 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors text-left"
              data-preset="large-commercial">ğŸ¬ Large Commercial</button>
            <button
              class="px-2.5 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors text-left"
              data-preset="residential">ğŸ  Residential</button>
            <button
              class="px-2.5 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors text-left"
              data-preset="workshop">ğŸ­ Workshop</button>
          </div>
        </section>

        <!-- Diagram Type -->
        <section>
          <label
            class="block text-[10px] font-semibold uppercase tracking-wider dark:text-gray-500 text-gray-400 mb-1.5">Diagram
            Type</label>
          <div class="flex flex-col gap-1" id="diagramTypeButtons">
            <button
              class="type-btn flex items-center gap-2 px-3 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 transition-colors active"
              data-type="refrigerant">
              <span>â„ï¸</span><span>Refrigerant Piping</span>
            </button>
            <button
              class="type-btn flex items-center gap-2 px-3 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 transition-colors"
              data-type="electrical">
              <span>âš¡</span><span>Electrical Wiring</span>
            </button>
            <button
              class="type-btn flex items-center gap-2 px-3 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 transition-colors"
              data-type="wiring">
              <span>ğŸ”Œ</span><span>Wiring Output</span>
            </button>
          </div>
        </section>

        <!-- Parameters -->
        <section>
          <label
            class="block text-[10px] font-semibold uppercase tracking-wider dark:text-gray-500 text-gray-400 mb-2">Parameters</label>
          <div class="space-y-3">
            <div>
              <div class="flex justify-between mb-1">
                <label for="numUnits" class="text-xs dark:text-gray-400 text-gray-500">Indoor Units</label>
                <span class="text-xs font-medium dark:text-gray-300 text-gray-600 font-mono" id="numUnitsVal">6</span>
              </div>
              <input type="range" id="numUnits" min="1" max="16" value="6" class="w-full" />
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <label for="systemCapacity" class="text-xs dark:text-gray-400 text-gray-500">System Capacity
                  (kW)</label>
                <span class="text-xs font-medium dark:text-gray-300 text-gray-600 font-mono"
                  id="systemCapacityVal">14</span>
              </div>
              <input type="range" id="systemCapacity" min="5" max="56" value="14" step="1" class="w-full" />
            </div>
            <div>
              <label for="buildingType" class="text-xs dark:text-gray-400 text-gray-500 block mb-1">Building
                Type</label>
              <select id="buildingType"
                class="w-full px-2.5 py-1.5 rounded border dark:border-gray-700 border-gray-200 dark:bg-gray-800 bg-white text-xs dark:text-gray-300 text-gray-600 outline-none focus:border-brand-500">
                <option value="office">Office</option>
                <option value="workshop">Workshop</option>
                <option value="residential">Residential</option>
                <option value="commercial">Commercial</option>
              </select>
            </div>
            <div>
              <label for="layoutSelect" class="text-xs dark:text-gray-400 text-gray-500 block mb-1">Layout</label>
              <select id="layoutSelect"
                class="w-full px-2.5 py-1.5 rounded border dark:border-gray-700 border-gray-200 dark:bg-gray-800 bg-white text-xs dark:text-gray-300 text-gray-600 outline-none focus:border-brand-500">
                <option value="horizontal-tree">Horizontal Tree</option>
                <option value="vertical-tree">Vertical Tree</option>
                <option value="compact-grid">Compact Grid</option>
              </select>
            </div>
            <div>
              <label for="diagramColorTheme" class="text-xs dark:text-gray-400 text-gray-500 block mb-1">Color
                Theme</label>
              <select id="diagramColorTheme"
                class="w-full px-2.5 py-1.5 rounded border dark:border-gray-700 border-gray-200 dark:bg-gray-800 bg-white text-xs dark:text-gray-300 text-gray-600 outline-none focus:border-brand-500">
                <option value="classic">Classic (White)</option>
                <option value="blueprint">Blueprint (Dark Blue)</option>
                <option value="engineering">Engineering (Grid)</option>
              </select>
            </div>
            <div id="wiringOutputsRow">
              <div class="flex justify-between mb-1">
                <label for="numOutputs" class="text-xs dark:text-gray-400 text-gray-500">Wiring Outputs</label>
                <span class="text-xs font-medium dark:text-gray-300 text-gray-600 font-mono" id="numOutputsVal">1</span>
              </div>
              <input type="range" id="numOutputs" min="1" max="4" value="1" class="w-full" />
            </div>
          </div>
        </section>

        <!-- Actions -->
        <section class="space-y-1.5">
          <button id="btnGenerate"
            class="w-full flex items-center justify-center gap-2 px-3 py-2 rounded bg-brand-500 hover:bg-brand-600 text-white text-xs font-medium transition-colors">
            ğŸ² Generate Random
          </button>
          <button id="btnRenderJson"
            class="w-full flex items-center justify-center gap-2 px-3 py-2 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors">
            ğŸ“„ Render from JSON
          </button>
        </section>

        <!-- JSON Editor -->
        <section>
          <div class="flex items-center justify-between mb-1.5">
            <label class="text-[10px] font-semibold uppercase tracking-wider dark:text-gray-500 text-gray-400">JSON
              Configuration</label>
            <div class="flex gap-0.5">
              <button id="btnCopyJson" title="Copy JSON"
                class="p-1 rounded dark:hover:bg-gray-800 hover:bg-gray-100 text-xs">ğŸ“‹</button>
              <button id="btnImportJson" title="Import JSON"
                class="p-1 rounded dark:hover:bg-gray-800 hover:bg-gray-100 text-xs">ğŸ“¥</button>
            </div>
          </div>
          <textarea id="jsonEditor" spellcheck="false" placeholder="Generate a diagram or paste JSON here..."
            class="w-full min-h-[140px] resize-y px-2.5 py-2 rounded border dark:border-gray-700 border-gray-200 dark:bg-gray-800 bg-white text-[11px] leading-relaxed font-mono dark:text-gray-300 text-gray-600 outline-none focus:border-brand-500 custom-scroll"></textarea>
          <input type="file" id="jsonFileInput" accept=".json" hidden />
        </section>

        <!-- Export -->
        <section>
          <label
            class="block text-[10px] font-semibold uppercase tracking-wider dark:text-gray-500 text-gray-400 mb-1.5">Export</label>
          <div class="flex gap-1.5">
            <button id="btnExportSvg"
              class="flex-1 flex items-center justify-center gap-1 px-2.5 py-1.5 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors">
              ğŸ“ SVG
            </button>
            <button id="btnExportPng"
              class="flex-1 flex items-center justify-center gap-1 px-2.5 py-1.5 rounded border dark:border-gray-700 border-gray-200 text-xs dark:text-gray-400 text-gray-500 dark:hover:border-gray-600 hover:border-gray-300 transition-colors">
              ğŸ–¼ï¸ PNG
            </button>
          </div>
        </section>

      </div>
    </aside>

    <!-- MAIN VIEWPORT -->
    <main id="viewport"
      class="flex-1 relative overflow-hidden dark:bg-gray-950 bg-gray-100 transition-colors duration-200">

      <!-- Stats bar -->
      <div id="statsBar"
        class="absolute top-0 left-0 right-0 z-10 flex items-center gap-4 px-4 py-2 dark:bg-gray-900/90 bg-white/90 border-b dark:border-gray-800 border-gray-200 text-xs opacity-0 -translate-y-full"
        style="transition: opacity .2s, transform .2s;">
        <div class="flex items-center gap-4">
          <div><span class="dark:text-gray-500 text-gray-400">Units: </span><span class="font-medium font-mono"
              id="statUnits">-</span></div>
          <div><span class="dark:text-gray-500 text-gray-400">Cooling: </span><span
              class="font-medium text-emerald-500 font-mono" id="statCooling">-</span></div>
          <div><span class="dark:text-gray-500 text-gray-400">Heating: </span><span
              class="font-medium text-orange-500 font-mono" id="statHeating">-</span></div>
          <div><span class="dark:text-gray-500 text-gray-400">Outdoor: </span><span class="font-medium font-mono"
              id="statOutdoor">-</span></div>
          <div><span class="dark:text-gray-500 text-gray-400">Pipe: </span><span class="font-medium font-mono"
              id="statPipe">-</span></div>
          <div><span class="dark:text-gray-500 text-gray-400">Layout: </span><span class="font-medium"
              id="statLayout">-</span></div>
        </div>
        <span class="ml-auto text-[10px] dark:text-gray-600 text-gray-300 font-mono" id="diagramTimestamp"></span>
      </div>

      <!-- Diagram container -->
      <div id="diagramContainer"
        class="w-full h-full overflow-auto flex items-center justify-center cursor-grab active:cursor-grabbing">
        <div id="placeholder" class="text-center px-8">
          <div class="text-4xl mb-3">ğŸ“Š</div>
          <h2 class="text-base font-semibold dark:text-gray-300 text-gray-600 mb-1">HVAC Diagram Generator</h2>
          <p class="text-xs dark:text-gray-500 text-gray-400 max-w-xs">Pick a preset or configure parameters, then click
            <strong class="dark:text-gray-300 text-gray-600">Generate Random</strong></p>
        </div>
      </div>

      <!-- Zoom controls -->
      <div id="zoomControls"
        class="absolute bottom-4 right-4 flex items-center gap-0.5 px-1.5 py-1 rounded dark:bg-gray-900 bg-white border dark:border-gray-800 border-gray-200">
        <button
          class="w-6 h-6 flex items-center justify-center rounded text-xs dark:text-gray-400 text-gray-500 dark:hover:bg-gray-800 hover:bg-gray-100 transition-colors"
          id="btnZoomIn">+</button>
        <span class="text-[10px] font-mono dark:text-gray-500 text-gray-400 min-w-[32px] text-center"
          id="zoomLevel">100%</span>
        <button
          class="w-6 h-6 flex items-center justify-center rounded text-xs dark:text-gray-400 text-gray-500 dark:hover:bg-gray-800 hover:bg-gray-100 transition-colors"
          id="btnZoomOut">âˆ’</button>
        <button
          class="w-6 h-6 flex items-center justify-center rounded text-xs dark:text-gray-400 text-gray-500 dark:hover:bg-gray-800 hover:bg-gray-100 transition-colors"
          id="btnZoomFit">âŠ¡</button>
      </div>

      <!-- Gen counter -->
      <div
        class="absolute top-2 right-4 z-20 text-[10px] font-mono dark:text-gray-600 text-gray-300 opacity-0 transition-opacity"
        id="generationBadge">
        Gen #<span class="font-medium" id="genCounter">0</span>
      </div>
    </main>
  </div>

  <!-- Toast container -->
  <div id="toastContainer" class="fixed top-4 right-4 z-50 flex flex-col gap-1.5 pointer-events-none"></div>

  <script type="module" src="src/main.js"></script>
</body>

</html>